"0","# --- INTENT: Display the results of the covariate adjustment models. ---"
"0","# --- EFFECT: Uses modelsummary to create a table comparing original DiD models with covariate-adjusted models. ---"
"0","message(""Generating table for Robustness Check 1..."")"
"2","Generating table for Robustness Check 1...
"
"0","models_cov_adj <- list()"
"0","# Add models only if they exist (were estimated successfully previously)"
"0","if (exists(""asp.did.w2"") && !is.null(asp.did.w2)) models_cov_adj[[""(2a) W2 DiD Wgt (FE)""]] <- asp.did.w2"
"0","if (exists(""asp.did.w2.cov"") && !is.null(asp.did.w2.cov)) models_cov_adj[[""(R1a) W2 DiD Wgt (Cov)""]] <- asp.did.w2.cov"
"0","if (exists(""asp.did.w2_unw"") && !is.null(asp.did.w2_unw)) models_cov_adj[[""(2b) W2 DiD Unw (FE)""]] <- asp.did.w2_unw"
"0","if (exists(""asp.did.w2.cov_unw"") && !is.null(asp.did.w2.cov_unw)) models_cov_adj[[""(R1b) W2 DiD Unw (Cov)""]] <- asp.did.w2.cov_unw"
"0","if (exists(""asp.did.w3"") && !is.null(asp.did.w3)) models_cov_adj[[""(4a) W3 DiD Wgt (FE)""]] <- asp.did.w3"
"0","if (exists(""asp.did.w3.cov"") && !is.null(asp.did.w3.cov)) models_cov_adj[[""(R1c) W3 DiD Wgt (Cov)""]] <- asp.did.w3.cov"
"0","if (exists(""asp.did.w3_unw"") && !is.null(asp.did.w3_unw)) models_cov_adj[[""(4b) W3 DiD Unw (FE)""]] <- asp.did.w3_unw"
"0","if (exists(""asp.did.w3.cov_unw"") && !is.null(asp.did.w3.cov_unw)) models_cov_adj[[""(R1d) W3 DiD Unw (Cov)""]] <- asp.did.w3.cov_unw"
"0",""
"0","if (length(models_cov_adj) > 0) {"
"0","  coef_map_cov <- c(""treat.dum"" = ""Treat assignment"","
"0","                    ""post.dum"" = ""Post-treatment"","
"0","                    ""treat.dum:post.dum"" = ""Treat x Post"","
"0","                    ""age"" = ""Age"","
"0","                    ""educ"" = ""Education"","
"0","                    ""male"" = ""Male"","
"0","                    ""Score"" = ""Score"","
"0","                    ""(Intercept)"" = ""Constant"")"
"0",""
"0","  gof_map_cov <- list("
"0","      list(""raw"" = ""nobs"", ""clean"" = ""Observations"", ""fmt"" = 0),"
"0","      list(""raw"" = ""r.squared"", ""clean"" = ""R$^{2}$"", ""fmt"" = 3),"
"0","      list(""raw"" = ""adj.r.squared"", ""clean"" = ""Adj. R$^{2}$"", ""fmt"" = 3)"
"0","  )"
"0",""
"0","  modelsummary(models_cov_adj,"
"0","               output = ""kableExtra"","
"0","               fmt = 3,"
"0","               stars = c(""â€ "" = 0.1, ""*"" = 0.05, ""**"" = 0.01, ""***"" = 0.001),"
"0","               coef_map = coef_map_cov,"
"0","               coef_omit = ""^factor\\(Region\\)|^\\(Intercept\\)$"", # Omit Region factors and Intercept"
"0","               gof_map = gof_map_cov,"
"0","               notes = list(""Standard errors in parentheses."","
"0","                          ""FE models include Region Fixed Effects."","
"0","                          ""Cov models replace Region FE with baseline Age, Education, Male, Score.""),"
"0","               title = ""Robustness Check 1: Sensitivity to Covariate Adjustment vs. Region Fixed Effects"","
"0","               escape = FALSE"
"0","               ) %>%"
"0","    kable_styling(latex_options = c(""striped"", ""hold_position""),"
"0","                  bootstrap_options = ""striped"","
"0","                  position = ""center"","
"0","                  font_size = 9,"
"0","                  full_width = FALSE) %>%"
"0","    add_header_above(c("" "" = 1, ""Wave 2 Models"" = 4, ""Wave 3 Models"" = 4)) %>% # Span headers"
"0","    column_spec(1, width = ""6em"")"
"0","} else {"
"0","  message(""Skipping Covariate Adjustment table: No models available."")"
"0","}"
