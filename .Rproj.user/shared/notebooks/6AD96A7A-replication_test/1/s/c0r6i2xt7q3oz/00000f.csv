"0","# CHUNK: table2b-replication"
"0","# PURPOSE: Create Table 2b showing Wave 3 models with p-values after Hochberg correction."
"0","# EXECUTION: Apply correction, assemble model list, and render table with styling."
"0","# FUN NOTE: Remember when I thought replication was easy? Good times."
"0",""
"0","# Load modelsummary (likely loaded in setup)"
"0","# library(modelsummary)"
"0","# library(tibble)"
"0",""
"0","# --- Apply Hochberg step-down correction for Wave 3 ---"
"0","# Use the same hochberg_correction function from the previous chunk"
"0",""
"0","# Apply Hochberg correction to the Wave 3 weighted DiD model"
"0","asp.did.w3_hochberg <- hochberg_correction(asp.did.w3)"
"0","class(asp.did.w3_hochberg) <- c(""hochberg"", class(asp.did.w3))"
"0",""
"0","# --- Prepare inputs for Table 2b --- "
"0","models_t2b <- list("
"0","  `W3 Mean` = asp.w3,"
"0","  `W3 DiD Wgt` = asp.did.w3,"
"0","  `W3 DiD Hoch.` = asp.did.w3_hochberg,"
"0","  `W3 DiD Unw` = asp.did.w3_unw"
"0",")"
"0",""
"0","# Define stars map again (or ensure it's global)"
"0","stars_map <- c(""â€ "" = 0.1, ""*"" = 0.05, ""**"" = 0.01, ""***"" = 0.001)"
"0",""
"0","add_rows_t2b <- tibble::tribble("
"0","  ~term,           ~`W3 Mean`, ~`W3 DiD Wgt`, ~`W3 DiD Hoch.`, ~`W3 DiD Unw`,"
"0","  ""Fixed effects"", ""Yes"", ""Yes"", ""Yes"", ""Yes"","
"0","  ""IPW Weighted"",  ""Yes"", ""Yes"", ""Yes"", ""No"","
"0","  ""Multiple test corr."", ""No"", ""No"", ""Yes"", ""No"""
"0",")"
"0",""
"0","# --- Generate Table 2b --- "
"0","modelsummary(models_t2b,"
"0","             output = ""kableExtra"", "
"0","             fmt = 3, "
"0","             stars = stars_map, "
"0","             coef_omit = ""Region"", "
"0","             coef_rename = c(""treat.dum"" = ""Treat assignment"", "
"0","                           ""post.dum"" = ""Post-treatment"", "
"0","                           ""treat.dum:post.dum"" = ""Treat x Post"","
"0","                           ""(Intercept)"" = ""Constant""), "
"0","             gof_map = list("
"0","               list(""raw"" = ""nobs"", ""clean"" = ""Observations"", ""fmt"" = 0),"
"0","               list(""raw"" = ""r.squared"", ""clean"" = ""R$^{2}$"", ""fmt"" = 3),"
"0","               list(""raw"" = ""adj.r.squared"", ""clean"" = ""Adj. R$^{2}$"", ""fmt"" = 3)"
"0","             ),"
"0","             add_rows = add_rows_t2b,"
"0","             notes = list(""SEs in parentheses; Hochberg column shows adjusted p-values"","
"0","                        ""Models: (3) weighted, (4a) weighted DiD, (4b) with multiple testing correction, (4c) unweighted"","
"0","                        ""All include regional fixed effects""),"
"0","             title = ""Effect of Program on Migration Aspiration (Wave 3 Models)"","
"0","             escape = FALSE"
"0","             ) %>%"
"0","  kable_styling(latex_options = c(""striped"", ""scale_down"", ""HOLD_position""), "
"0","                bootstrap_options = ""striped"","
"0","                position = ""center"","
"0","                font_size = 9,"
"0","                full_width = FALSE)"
